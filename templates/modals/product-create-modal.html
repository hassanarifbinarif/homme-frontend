{% load static %}

<div class="modal fade" id="productCreate" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="productCreateLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content text-center">
            <form action="">
                {% csrf_token %}
                <div class="modal-header border-bottom-0 w-100 justify-content-between">
                    <span>Add New Product</span>
                    <svg class="cursor-pointer" data-bs-dismiss="modal" aria-label="Close" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
                        <path d="M13.4672 9.67878C13.8189 8.8295 14 7.91925 14 7C14 5.14348 13.2625 3.36301 11.9497 2.05025C10.637 0.737498 8.85652 0 7 0C5.14348 0 3.36301 0.737498 2.05025 2.05025C0.737498 3.36301 0 5.14348 0 7C0 7.91925 0.18106 8.8295 0.532843 9.67878C0.884626 10.5281 1.40024 11.2997 2.05025 11.9497C2.70026 12.5998 3.47194 13.1154 4.32122 13.4672C5.1705 13.8189 6.08075 14 7 14C7.91925 14 8.8295 13.8189 9.67878 13.4672C10.5281 13.1154 11.2997 12.5998 11.9497 11.9497C12.5998 11.2997 13.1154 10.5281 13.4672 9.67878Z" fill="#D9D9D9"/>
                        <path d="M4.66602 9.33518L6.99962 7.00157M6.99962 7.00157L9.33323 4.66797M6.99962 7.00157L4.66602 4.66797M6.99962 7.00157L9.33323 9.33518" stroke="#3F3F46" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="modal-body">
                    <div class="group-inputs">
                        <div>
                            <label for="title">Title</label>
                            <input type="text" required placeholder="Enter title" name="title" id="title" />
                        </div>
                        <div>
                            <label for="sku">SKU#</label>
                            <input type="text" required placeholder="HOMME064B" name="sku_num" id="sku" />
                        </div>
                    </div>
                    <div class="group-inputs">
                        <div>
                            <span>Product Category</span>
                            <div class="selection-input">
                                <button class="filter-btn" id="product-category" type="button">
                                    <span id="selected-product-category">Product Category</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="11" height="6" viewBox="0 0 11 6" fill="none">
                                        <path opacity="0.7" d="M10.5 0.5L5.5 5.5L0.5 0.5H10.5Z" fill="#030706"/>
                                    </svg>
                                </button>
                                <div class="filter-dropdown" id="product-category-dropdown">
                                    <!-- <div class="radio-btn">
                                        <input id="hair-care" type="radio" value="hair_care" name="product_category_radio" />
                                        <label for="hair-care" class="radio-label">Hair Care</label>
                                    </div>
                                    <div class="radio-btn">
                                        <input id="skin-care" type="radio" value="skin_care" name="product_category_radio" />
                                        <label for="skin-care" class="radio-label">Skin Care</label>
                                    </div>
                                    <div class="radio-btn">
                                        <input id="beard-care" type="radio" value="beard_care" name="product_category_radio" />
                                        <label for="beard-care" class="radio-label">Beard Care</label>
                                    </div>
                                    <div class="radio-btn">
                                        <input id="shaving-grooming" type="radio" value="shaving_grooming" name="product_category_radio" />
                                        <label for="shaving-grooming" class="radio-label">Shaving And Grooming</label>
                                    </div>
                                    <div class="radio-btn">
                                        <input id="body-care" type="radio" value="body_care" name="product_category_radio" />
                                        <label for="body-care" class="radio-label">Body Care</label>
                                    </div>
                                    <div class="radio-btn">
                                        <input id="accessories" type="radio" value="accessories" name="product_category_radio" />
                                        <label for="accessories" class="radio-label">Accessories</label>
                                    </div>
                                    <div class="radio-btn">
                                        <input id="fragrances" type="radio" value="fragrances" name="product_category_radio" />
                                        <label for="fragrances" class="radio-label">Fragrances</label>
                                    </div> -->
                                </div>
                            </div>
                            <!-- <input type="text" placeholder="Product Category" name="product_category" id="title" /> -->
                        </div>
                        <div>
                            <span>Product Type</span>
                            <div class="selection-input">
                                <button class="filter-btn" id="product-type" type="button">
                                    <span id="selected-product-type">Product Type</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="11" height="6" viewBox="0 0 11 6" fill="none">
                                        <path opacity="0.7" d="M10.5 0.5L5.5 5.5L0.5 0.5H10.5Z" fill="#030706"/>
                                    </svg>
                                </button>
                                <div class="filter-dropdown" id="product-type-dropdown">
                                    <!-- <div class="radio-btn">
                                        <input id="shampoo" type="radio" value="shampoo" name="product_type_radio" />
                                        <label for="shampoo" class="radio-label">Shampoo</label>
                                    </div>
                                    <div class="radio-btn">
                                        <input id="face-serum" type="radio" value="face_serum" name="product_type_radio" />
                                        <label for="face-serum" class="radio-label">Face Serum</label>
                                    </div>
                                    <div class="radio-btn">
                                        <input id="hair-serum" type="radio" value="hair_serum" name="product_type_radio" />
                                        <label for="hair-serum" class="radio-label">Haire Serum</label>
                                    </div>
                                    <div class="radio-btn">
                                        <input id="hair-spray" type="radio" value="hair_spray" name="product_type_radio" />
                                        <label for="hair-spray" class="radio-label">Hair Spray</label>
                                    </div>
                                    <div class="radio-btn">
                                        <input id="face-mask" type="radio" value="face_mask" name="product_type_radio" />
                                        <label for="face-mask" class="radio-label">Face Mask</label>
                                    </div> -->
                                </div>
                            </div>
                            <!-- <input type="text" placeholder="Product Type" name="product_type" id="sku" /> -->
                        </div>
                    </div>
                    <div class="general-input">
                        <label for="short_desc">Short Description</label>
                        <input type="text" required placeholder="Short Description" name="short_description" id="short_desc" />
                    </div>
                    <div class="group-inputs">
                        <div>
                            <label for="price">Price</label>
                            <input type="number" required placeholder="Price" name="price" id="price" />
                        </div>
                        <div>
                            <label for="size">Size</label>
                            <input type="text" required placeholder="Size" name="size" id="size" />
                        </div>
                    </div>
                    <div class="group-inputs">
                        <div>
                            <label for="special_attributes">Special Attributes</label>
                            <input type="text" required placeholder="Special attributes" name="special_attributes" id="special_attributes" />
                        </div>
                        <div>
                            <span>Skin Type</span>
                            <div class="selection-input">
                                <button class="filter-btn" id="skin-type" type="button">
                                    <span id="selected-skin-type">Skin Type</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="11" height="6" viewBox="0 0 11 6" fill="none">
                                        <path opacity="0.7" d="M10.5 0.5L5.5 5.5L0.5 0.5H10.5Z" fill="#030706"/>
                                    </svg>
                                </button>
                                <div class="filter-dropdown" id="skin-type-dropdown">
                                    <!-- <div class="radio-btn">
                                        <input id="shampoo" type="radio" value="shampoo" name="product_type_radio" />
                                        <label for="shampoo" class="radio-label">Shampoo</label>
                                    </div>
                                    <div class="radio-btn">
                                        <input id="face-serum" type="radio" value="face_serum" name="product_type_radio" />
                                        <label for="face-serum" class="radio-label">Face Serum</label>
                                    </div>
                                    <div class="radio-btn">
                                        <input id="hair-serum" type="radio" value="hair_serum" name="product_type_radio" />
                                        <label for="hair-serum" class="radio-label">Haire Serum</label>
                                    </div>
                                    <div class="radio-btn">
                                        <input id="hair-spray" type="radio" value="hair_spray" name="product_type_radio" />
                                        <label for="hair-spray" class="radio-label">Hair Spray</label>
                                    </div>
                                    <div class="radio-btn">
                                        <input id="face-mask" type="radio" value="face_mask" name="product_type_radio" />
                                        <label for="face-mask" class="radio-label">Face Mask</label>
                                    </div> -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="general-input">
                        <label for="tags">Tags</label>
                        <input type="text" required placeholder="Add tags" name="tags" id="" />
                    </div>
                    <div class="description-input">
                        <label for="description">Description</label>
                        <textarea name="description" required placeholder="Add description..." id="description" cols="30" rows="10"></textarea>
                    </div>
                    <div class="add-media-wrapper">
                        <span>Add Media</span>
                        <div class="add-media-inputs">
                            <div class="media-input">
                                <span>Buy Page</span>
                                <div>
                                    <label class="cursor-pointer" for="buy-page">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="52" height="35" viewBox="0 0 52 35" fill="none">
                                            <path d="M43.8023 15.28C42.6902 6.675 35.1908 0 26.1314 0C19.118 0 13.0258 4.0275 10.2443 10.375C4.77814 11.98 0.683594 17.05 0.683594 22.5C0.683594 29.3925 6.39153 35 13.4075 35H41.4C47.0138 35 51.5791 30.515 51.5791 25C51.5752 22.759 50.8071 20.5839 49.3975 18.8221C47.9878 17.0602 46.0179 15.8131 43.8023 15.28ZM28.6761 22.5V30H23.5866V22.5H15.9523L26.1314 10L36.3105 22.5H28.6761Z" fill="#000093"/>
                                        </svg>
                                        <span>Upload an Image</span>
                                        <input type="file" required accept="image/jpeg, image/jpg, image/png" name="prod_buy_page_img" id="buy-page" oninput="previewImage(event);" />
                                        <img class="product-image hide" src="" alt="product image" />
                                    </label>
                                </div>
                            </div>
                            <div class="media-input">
                                <span>Product Detail</span>
                                <div>
                                    <label class="cursor-pointer" for="prod-detail-img-1">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="52" height="35" viewBox="0 0 52 35" fill="none">
                                            <path d="M43.8023 15.28C42.6902 6.675 35.1908 0 26.1314 0C19.118 0 13.0258 4.0275 10.2443 10.375C4.77814 11.98 0.683594 17.05 0.683594 22.5C0.683594 29.3925 6.39153 35 13.4075 35H41.4C47.0138 35 51.5791 30.515 51.5791 25C51.5752 22.759 50.8071 20.5839 49.3975 18.8221C47.9878 17.0602 46.0179 15.8131 43.8023 15.28ZM28.6761 22.5V30H23.5866V22.5H15.9523L26.1314 10L36.3105 22.5H28.6761Z" fill="#000093"/>
                                        </svg>
                                        <span>Upload an Image</span>
                                        <input type="file" required accept="image/jpeg, image/jpg, image/png" name="prod_detail_img_1" id="prod-detail-img-1" oninput="previewImage(event);" />
                                        <img class="product-image hide" src="" alt="product image" />
                                    </label>                                    
                                </div>
                            </div>
                            <div class="media-input">
                                <span>Product Detail</span>
                                <div>
                                    <label class="cursor-pointer" for="prod-detail-img-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="52" height="35" viewBox="0 0 52 35" fill="none">
                                            <path d="M43.8023 15.28C42.6902 6.675 35.1908 0 26.1314 0C19.118 0 13.0258 4.0275 10.2443 10.375C4.77814 11.98 0.683594 17.05 0.683594 22.5C0.683594 29.3925 6.39153 35 13.4075 35H41.4C47.0138 35 51.5791 30.515 51.5791 25C51.5752 22.759 50.8071 20.5839 49.3975 18.8221C47.9878 17.0602 46.0179 15.8131 43.8023 15.28ZM28.6761 22.5V30H23.5866V22.5H15.9523L26.1314 10L36.3105 22.5H28.6761Z" fill="#000093"/>
                                        </svg>
                                        <span>Upload an Image</span>
                                        <input type="file" required accept="image/jpeg, image/jpg, image/png" name="prod_detail_img_2" id="prod-detail-img-2" oninput="previewImage(event);" />
                                        <img class="product-image hide" src="" alt="product image" />
                                    </label>
                                </div>
                            </div>
                            <div class="media-input">
                                <span>Product Detail</span>
                                <div>
                                    <label class="cursor-pointer" for="prod-detail-img-3">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="52" height="35" viewBox="0 0 52 35" fill="none">
                                            <path d="M43.8023 15.28C42.6902 6.675 35.1908 0 26.1314 0C19.118 0 13.0258 4.0275 10.2443 10.375C4.77814 11.98 0.683594 17.05 0.683594 22.5C0.683594 29.3925 6.39153 35 13.4075 35H41.4C47.0138 35 51.5791 30.515 51.5791 25C51.5752 22.759 50.8071 20.5839 49.3975 18.8221C47.9878 17.0602 46.0179 15.8131 43.8023 15.28ZM28.6761 22.5V30H23.5866V22.5H15.9523L26.1314 10L36.3105 22.5H28.6761Z" fill="#000093"/>
                                        </svg>
                                        <span>Upload an Image</span>
                                        <input type="file" required accept="image/jpeg, image/jpg, image/png" name="prod_detail_img_3" id="prod-detail-img-3" oninput="previewImage(event);" />
                                        <img class="product-image hide" src="" alt="product image" />
                                    </label>
                                </div>
                            </div>
                            <div class="media-input">
                                <span>Product Detail</span>
                                <div>
                                    <label class="cursor-pointer" for="prod-detail-img-4">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="52" height="35" viewBox="0 0 52 35" fill="none">
                                            <path d="M43.8023 15.28C42.6902 6.675 35.1908 0 26.1314 0C19.118 0 13.0258 4.0275 10.2443 10.375C4.77814 11.98 0.683594 17.05 0.683594 22.5C0.683594 29.3925 6.39153 35 13.4075 35H41.4C47.0138 35 51.5791 30.515 51.5791 25C51.5752 22.759 50.8071 20.5839 49.3975 18.8221C47.9878 17.0602 46.0179 15.8131 43.8023 15.28ZM28.6761 22.5V30H23.5866V22.5H15.9523L26.1314 10L36.3105 22.5H28.6761Z" fill="#000093"/>
                                        </svg>
                                        <span>Upload an Image</span>
                                        <input type="file" required accept="image/jpeg, image/jpg, image/png" name="prod_detail_img_4" id="prod-detail-img-4" oninput="previewImage(event);" />
                                        <img class="product-image hide" src="" alt="product image" />
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="specific-product-shipping-wrapper">
                        <div>
                            <span>Shipping</span>
                        </div>
                        <div class="specific-product-shipping-details" id="specific-product-shipping-details">
                            <div class="physical-dimensions">
                                <span>Physical Dimension:</span>
                                <div>
                                    <div class="input-div">
                                        <span>Length</span>
                                        <div>
                                            <input type="number" required name="length" placeholder="0" id="" />
                                            <div>Ft</div>
                                        </div>
                                    </div>
                                    <div class="vr"></div>
                                    <div class="input-div">
                                        <span>Width</span>
                                        <div>
                                            <input type="number" required name="width" placeholder="0" id="" />
                                            <div>Ft</div>
                                        </div>
                                    </div>
                                    <div class="vr"></div>
                                    <div class="input-div">
                                        <span>Height</span>
                                        <div>
                                            <input type="number" required name="height" placeholder="0" id="" />
                                            <div>Ft</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="shipping-weight">
                                <span>Shipping Weight</span>
                                <div class="input-div">
                                    <span>Weight</span>
                                    <div>
                                        <input type="number" required name="weight" placeholder="0" id="" />
                                        <div>oz</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer border-top-0">
                    <button id="data-id" class="submit-btn" type="button" data-bs-dismiss="modal">
                        CANCEL
                    </button>
                    <button id="data-id" class="submit-btn" type="submit">
                        CREATE
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
<input type="hidden" class="productCreate" data-bs-toggle="modal" data-bs-target="#productCreate" />

<script>
    let productCategoryDropdown = document.getElementById('product-category-dropdown');
    let productCategoryDropdownBtn = document.getElementById('product-category');
    let productCategoryOptions = document.querySelectorAll('input[name="product_category_radio"]');

    let productTypeDropdown = document.getElementById('product-type-dropdown');
    let productTypeDropdownBtn = document.getElementById('product-type');
    let productTypeOptions = document.querySelectorAll('input[name="product_type_radio"]');
    
    let skinTypeDropdown = document.getElementById('skin-type-dropdown');
    let skinTypeDropdownBtn = document.getElementById('skin-type');
    let skinTypeOptions = document.querySelectorAll('input[name="skin_type_radio"]');

    // let addCategoryBtn = document.getElementById('add-category-btn');
    // let categoryList = document.getElementById('category-list');

    productCategoryOptions.forEach((option) => {
        option.addEventListener('change', function() {
            if(this.checked) {
                document.getElementById('selected-product-category').innerText = this.nextElementSibling.innerText;
                document.getElementById('selected-product-category').style.color = '#000';
            }
        })
    })
    productCategoryDropdownBtn.addEventListener('click', toggleDropdown);

    
    productTypeOptions.forEach((option) => {
        option.addEventListener('change', function() {
            if(this.checked) {
                document.getElementById('selected-product-type').innerText = this.nextElementSibling.innerText;
                document.getElementById('selected-product-type').style.color = '#000';
            }
        })
    })
    productTypeDropdownBtn.addEventListener('click', toggleDropdown);
    
    
    skinTypeOptions.forEach((option) => {
        option.addEventListener('change', function() {
            if(this.checked) {
                document.getElementById('selected-skin-type').innerText = this.nextElementSibling.innerText;
                document.getElementById('selected-skin-type').style.color = '#000';
            }
        })
    })
    skinTypeDropdownBtn.addEventListener('click', toggleDropdown);

    function toggleDropdown(event) {
        let elementBtn = event.target;
        if(!elementBtn.classList.contains('filter-btn')) {
            elementBtn = elementBtn.closest('.filter-btn');
        }
        let elementDropdown = elementBtn.nextElementSibling;
        if(elementDropdown.style.display == 'flex') {
            elementDropdown.style.display = 'none';
        }
        else {
            elementDropdown.style.display = 'flex';
        }
    }

    function closeDropdowns(event) {
        if((!productCategoryDropdownBtn.contains(event.target)) && productCategoryDropdown.style.display == 'flex') {
            productCategoryDropdown.style.display = 'none';
        }
        else if((!productTypeDropdownBtn.contains(event.target)) && productTypeDropdown.style.display == 'flex') {
            productTypeDropdown.style.display = 'none';
        }
        else if((!skinTypeDropdownBtn.contains(event.target)) && skinTypeDropdown.style.display == 'flex') {
            skinTypeDropdown.style.display = 'none';
        }
        // else if(categoryList.contains(event.target)) {
        //     categoryList.classList.add('hide');
        // }
    }

    document.body.addEventListener('click', closeDropdowns);
</script>
<script>
    function previewImage(event) {
        let imageInput = event.currentTarget;
        let image = imageInput.files;
        let imageTag = imageInput.closest('label').querySelector('.product-image');
        imageTag.src = window.URL.createObjectURL(image[0]);
        imageTag.classList.remove('hide');
        imageInput.closest('label').querySelector('svg').style.display = 'none';
        imageInput.closest('label').querySelector('span').style.display = 'none';
    }
</script>